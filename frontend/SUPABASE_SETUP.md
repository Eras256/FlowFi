
# Supabase Setup for FlowFi

To enable the Dashboard and Marketplace persistence, please run the following SQL in your Supabase SQL Editor:

```sql
create table invoices (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  invoice_id text not null,
  vendor_name text not null,
  client_name text,
  amount numeric not null,
  currency text default 'USD',
  due_date timestamp with time zone,
  risk_score numeric,
  grade text,
  yield_rate text,
  term_days text,
  deploy_hash text not null,
  ipfs_url text,
  funding_status text default 'available', -- 'available' or 'funded'
  investor_deploy_hash text
);

-- Turn on RLS
alter table invoices enable row level security;

-- Policies
create policy "Enable read access for all users"
on invoices for select
using (true);

create policy "Enable insert for all users"
on invoices for insert
with check (true);

create policy "Enable update for all users"
on invoices for update
using (true);
```

After running this SQL, the application will automatically save minted invoices to this table and load them in the Marketplace.
